<% include ./partials/header.ejs %>
<br/>
<div class="panel panel-default">
    <div class="panel-body">
        <form action="/restaurantes/distancia" method="get">

            <div id="map"></div>

            <!--<div class="form-group">-->
                <!--<input type="submit" class="btn btn-primary" value="Ver"/>-->
            <!--</div>-->
        </form>
    </div>
</div>
<script>
    function initMap() {
        var location = { lat: <%= lat %>, lng: <%= lng %> };
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 16,
            center: location
        });

        <% restaurantes.forEach(restaurante => { %>
            var latLng = new google.maps.LatLng(<%= restaurante.loc.coordinates[1] %>, <%= restaurante.loc.coordinates[0] %>);
            var marker<%= restaurante._id %> = new google.maps.Marker({
                position: latLng,
                map: map
            });
        <% }) %>
    }
</script>
<% include ./partials/footer.ejs %>
